<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8" />
    <title>방탈출 관리자 페이지</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- 🔥 분리한 스타일 -->
    <link rel="stylesheet" href="/css/admin.css" />
</head>

<body>
    <!-- 🔐 관리자 잠금 오버레이 -->
    <div id="admin-lock" class="lock-overlay">
        <div class="lock-card">
            <h2>관리자 로그인</h2>
            <p class="lock-desc">관리자 전용 페이지입니다. 비밀번호를 입력하세요.</p>

            <input id="admin-password-input" type="password" placeholder="관리자 비밀번호" autocomplete="off" />

            <button id="admin-login-btn" class="btn-primary lock-btn">
                입장하기
            </button>

            <p id="admin-lock-msg" class="status-text"></p>
        </div>
    </div>

    <!-- 🔥 실제 관리자 내용은 여기 안에 -->
    <div id="admin-content" class="hidden">
        <div class="admin-container"><!-- ✅ 추가 -->

            <h1>멘사코리아 방탈출 랭킹보드</h1>
            <h2 class="title-sub">
                Unbound E<span class="red">l</span>egance,
                Br<span class="red">i</span><span class="red">g</span><span class="red">h</span>ter
                Nigh<span class="red">t</span>
            </h2>

            <div class="race-section">
                <h2 id="race-title">전체 도전중 인원 랭킹</h2>
                <p class="race-desc">
                    모든 방의 도전중인 인원을 합쳐 상위 20명까지 순위대로 경주합니다.
                </p>
                <div id="race-track" class="race-track race-track-empty">
                    <p class="race-empty">아직 통계를 불러오지 않았습니다.</p>
                </div>
            </div>

            <table>
                <thead>
                    <tr>
                        <th>방</th>
                        <th>클리어한 인원</th>
                        <th>도전중인 인원</th>
                    </tr>
                </thead>
                <tbody id="stats-body"></tbody>
            </table>


            <div class="clear-section">
                <h2>스테이지별 클리어 현황</h2>
                <p class="clear-desc">각 스테이지를 클리어한 참가자들이 도착 순서대로 표시됩니다.</p>
                <div id="clear-list"></div>
            </div>

            <div class="top-row">
                <button id="refresh-btn" class="btn-primary">통계 새로고침</button>
                <button id="reset-btn" class="btn-danger">통계 / 랭킹 초기화</button>
                <span id="status" class="status-text"></span>
            </div>

            <div class="player-section">
                <h2>참가자 명단 관리</h2>
                <p class="player-desc">
                    참가자 명단을 CSV(엑셀) 파일로 내려받거나, CSV 파일을 업로드해서 갱신할 수 있습니다.
                </p>

                <div class="player-actions">
                    <button id="players-export-btn" class="btn-primary">
                        참가자 명단 다운로드
                    </button>

                    <!-- 파일 업로드는 숨겨놓고 라벨 버튼으로 트리거 -->
                    <label for="players-file-input" class="btn-primary player-upload-label">
                        CSV 업로드로 명단 갱신
                    </label>
                    <input id="players-file-input" type="file" accept=".csv" class="hidden" />

                    <span id="players-import-status" class="status-text"></span>
                </div>

            </div>

        </div><!-- admin-container 끝 -->
    </div>

    <script src="/js/admin.js" defer></script>
</body>

</html>